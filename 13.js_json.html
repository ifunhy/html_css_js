<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>js json</title>
</head>

<body>
    <table border="1" style="border-collapse: collapse; margin: autos;">
        <thead>
            <tr>
                <th>name</th>
                <th>age</th>
                <th>score</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td id="name"></td>
                <td id="age"></td>
                <td id="score"></td>
            </tr>
        </tbody>
    </table>

    <table border="1" style="border-collapse: collapse; margin: autos;">
        <thead>
            <tr>
                <th>name</th>
                <th>age</th>
                <th>score</th>
            </tr>
        </thead>
        <tbody id="tbodyId">

        </tbody>
    </table>

    <script>
        const jsonText = '{"name":"Alice","age":25,"score":85}';
        // json을 javascript의 객체로 역직렬화(parsing)
        const obj1 = JSON.parse(jsonText);
        document.getElementById("name").innerHTML = obj1.name;
        document.getElementById("age").innerHTML = obj1.age;
        document.getElementById("score").innerHTML = obj1.score;
        console.log(obj1);

        const jsonText2 = '[{"name":"Alice","age":25,"score":85},{"name":"Bob","age":28,"score":92},{"name":"Charlie","age":32,"score":88}]';

        const obj2 = JSON.parse(jsonText2); // javascript 객체로 변환
        
        for (let i = 0; i < obj2.length; i++) {
            // js에서 문자열에 js변수를 끼워넣을 때 빽틱(`)에 ${}를 활용
            const html = `<tr><td>${obj2[i].name}</td><td>${obj2[i].age}</td><td>${obj2[i].score}</td></tr>`;
            document.getElementById("tbodyId").innerHTML += html;
        }
        
        // const tbody = document.getElementById("tbodyId");   // tbodyId의 요소를 가져옴

        // obj2.forEach(person => {                            // 각 요소(person)를 하나씩 반복 처리
        //     const row = document.createElement("tr");       // 새로운 <tr>(테이블의 한 행)을 생성

        //     const nameTd = document.createElement("td");    // <td> 셀을 하나 만들고, 그 안에 person.name 넣음
        //     nameTd.innerText = person.name;

        //     const ageTd = document.createElement("td");     // 나이를 출력할 <td> 셀 생성
        //     ageTd.innerText = person.age;

        //     const scoreTd = document.createElement("td");   // 점수를 출력할 <td> 셀 생성
        //     scoreTd.innerText = person.score;

        //     row.appendChild(nameTd);    // 위에서 만든 3개의 <td>를 <tr> 행 안에 순서대로 추가
        //     row.appendChild(ageTd);
        //     row.appendChild(scoreTd);

        //     tbody.appendChild(row);     // 완성된 <tr>을 <tbody>에 추가
        // });



        //json 직렬화
        const jsonText3 = JSON.stringify(obj2);     // json 문자열화
        console.log(jsonText3);     // json
        console.log(obj2);          // 객체
    </script>
</body>

</html>

<!-- 동적으로 들어가도록 구현 -->